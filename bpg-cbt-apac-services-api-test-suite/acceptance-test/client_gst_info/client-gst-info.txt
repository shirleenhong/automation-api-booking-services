*** Settings ***
Resource          ../resources/api-variables.txt
Resource          ../resources/api-utilities.txt
Resource          ../resources/api-imports.txt
Resource    resources/client-gst-info.txt
Test Teardown    Evict Client GST Info Cache

*** Test Cases ***
Verify That All Client GST Info Are Correctly Retrieved
    [Tags]    functional
    Send Get Request For Client GST Info    gstin=${EMPTY}
    Verify Response Status Code Is Correct    200
    Verify The Number Of Records Is Correct    expected_record=1369
    
Verify That Client GST Info Is Correctly Retrieved
    [Tags]    functional
	Create Test Variables For Client GST Info    item=4
	Verify Client GST Info Are Retrieved Correctly
    
Verify That Client GST Info Is Added After Put Request-Complete Info
    [Tags]    functional
    Create Test Variables For Put Client GST Info
	Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info

Verify That Client GST Info Is Saved When Validating The Minimum Length In Put Request
    [Tags]    functional
    Create Test Variables For Put Client GST Info    item=min_length 
	Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info

Verify That Client GST Info Is Saved When Validating The Maximum Length After Put Request
    Create Test Variables For Put Client GST Info    item=max_length    
	Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info

Verify That Client GST Info Allows Special Characters In Client After Put Request
    Create Test Variables For Put Client GST Info    item=new_record    field_value=client:Banco-de.Oro!
    Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info
    
Verify That Client GST Info Allows Spaces And Period In Client Name After Put Request
    Create Test Variables For Put Client GST Info    item=new_record    field_value=clientName:Bank Of The Phil. Island. 
    Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin} 
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info
    
Verify That Client GST Info Allows Spaces And Period In Address1 After Put Request
    Create Test Variables For Put Client GST Info    item=new_record    field_value=address1:Tower2 Andherii Kurla Rd. 
    Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info

Verify That Client GST Info Allows Spaces And Period In Address2 After Put Request
    Create Test Variables For Put Client GST Info    item=new_record    field_value=address2:7th Floor Bajar Brand. 
    Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info
        
Verify That Client GST Info Allows Specific Special Characters In Email After Put Request
    Create Test Variables For Put Client GST Info    item=new_record    field_value=email:test-gst_info.12@gmail.com.ph
    Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    200
    Verify Client GST Info Is Added And Retrieved
    Send Delete Request For Client GST Info
    
Verify That Client GST Info Is Updated After Put Request
    [Tags]    functional
    Create Test Variables For Put Client GST Info
    Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Client GST Info Is Added And Retrieved 
    Create Test Variables For Put Client GST Info    with_address2=false    gstin_info=existing
    Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200    
    Send Get Request For Client GST Info    gstin=${gstin}  
    Verify Client GST Info Is Added And Retrieved    with_address2=false

Verify That Client GST Info Can Be Saved From Excel File
    [Tags]    functional
    Send Post Request For Client GST Info    filename=add_client_gst__info.xlsx
    Verify Response Status Code Is Correct    200
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${EMPTY}
    Verify The Number Of Records Is Correct    expected_record=5
    Create Test Variables For Client GST Info    item=uploaded_data
	Verify Client GST Info Are Retrieved Correctly
    Send Post Request For Client GST Info    filename=GSTLookup_Amadeus.xlsm
    Verify Response Status Code Is Correct    200
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${EMPTY} 
    Verify The Number Of Records Is Correct    expected_record=1369
       
Verify That Client GST Info Is Deleted After Delete Request
    Create Test Variables For Put Client GST Info
	Send Put Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Evict Client GST Info Cache
    Send Delete Request For Client GST Info
    Verify Response Status Code Is Correct    200
    Evict Client GST Info Cache
    Send Get Request For Client GST Info    gstin=${gstin}
    Verify Response Status Code Is Correct    404
    Verify Client GST Info Record Is Not Retrieved
    