*** Settings ***
Suite Setup    
Resource          ../resources/api-variables.txt
Resource          ../resources/api-utilities.txt
Resource          ../resources/api-imports.txt
Resource          resources/exchange-order.txt


*** Test Cases ***
Verify That Exchange Order PDF Generation Is Successful For Singapore
    [Tags]    functional
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,300.01|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
   
Verify That Exchange Order PDF Generation Is Successful For Hong Kong
    [Tags]    functional
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000|country,HK|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CC|gst_absorb,false|gst_amount,300|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45|merchant_fee_absorb,false|nett_cost,600|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,177|tax_2,120|total,1200|total_selling_price,1500|vendor_contact,TEST Contact Person|vendor_code,000001|vendor_name,CWT|vendor_address_1,27/F ING TOWER|vendor_address_2,308 DES VOEUX ROAD CENTRAL|vendor_city,${EMPTY}|vendor_country,HONG KONG    eo_remarks_data=REQUEST ADJOINING ROOMS    itin_remarks_data=EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    
Verify That Exchange Order PDF Generation Is Successful And Displays Correct Vendor Information
    [Tags]    functional
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,300.01|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    contact_data=email,test@test.com,true|fax,099097668,true|phone,000099990000,false    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly

Verify That Exchange Order PDF Generation Is Successful And Display Blank Values For Optional Fields
    [Tags]    functional
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,null|commission,1000|country,HK|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fop_type,CC|gst_absorb,false|gst_amount,300|header_address,Test Header Address|header_fax,null|header_telephone,null|merchant_fee,45|merchant_fee_absorb,false|nett_cost,600|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,null|recordLocator,PNR1234|sellingPrice,700|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,null|tax_2,null|total,1200|total_selling_price,1500|vendor_contact,null|vendor_code,000001|vendor_name,CWT|vendor_address_1,27/F ING TOWER|vendor_address_2,308 DES VOEUX ROAD CENTRAL|vendor_city,${EMPTY}|vendor_country,HONG KONG    
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly

Verify That Exchange Order PDF Generation Is Successful And Displays Correct GST/ Tax Label When Applicable
    [Tags]    functional
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,300.01|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,0|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000|country,HK|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CC|gst_absorb,false|gst_amount,300|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45|merchant_fee_absorb,false|nett_cost,600|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,null|tax_2,null|total,1200|total_selling_price,1500|vendor_contact,TEST Contact Person|vendor_code,000001|vendor_name,CWT|vendor_address_1,27/F ING TOWER|vendor_address_2,308 DES VOEUX ROAD CENTRAL|vendor_city,${EMPTY}|vendor_country,HONG KONG    eo_remarks_data=REQUEST ADJOINING ROOMS    itin_remarks_data=EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly 
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,0|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000|country,HK|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CC|gst_absorb,false|gst_amount,0|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45|merchant_fee_absorb,false|nett_cost,600|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,0|tax_2,0|total,1200|total_selling_price,1500|vendor_contact,TEST Contact Person|vendor_code,000001|vendor_name,CWT|vendor_address_1,27/F ING TOWER|vendor_address_2,308 DES VOEUX ROAD CENTRAL|vendor_city,${EMPTY}|vendor_country,HONG KONG    eo_remarks_data=REQUEST ADJOINING ROOMS    itin_remarks_data=EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,300.01|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000|country,HK|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CC|gst_absorb,false|gst_amount,300|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45|merchant_fee_absorb,false|nett_cost,600|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,null|tax_2,null|total,1200|total_selling_price,1500|vendor_contact,TEST Contact Person|vendor_code,000001|vendor_name,CWT|vendor_address_1,27/F ING TOWER|vendor_address_2,308 DES VOEUX ROAD CENTRAL|vendor_city,${EMPTY}|vendor_country,HONG KONG    eo_remarks_data=REQUEST ADJOINING ROOMS    itin_remarks_data=EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Send Exchange Order PDF Get Request
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    
Verify That Exchange Order PDF Generation Is Successful And Displays Updated Exchange Order Information
    [Tags]    functional
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Test Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,300.01|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    contact_data=email,test@test.com,true|fax,099097668,true    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Send Exchange Order Post Request
    Verify Response Status Code Is Correct For Exchange Order Request    201
    Evict Exchange Order Cache
    Verify Exchange Order Number Is Returned Correctly
    Create Test Variables For Exchange Order For Amend    account_number,null|date,null|agent_id,null|agent_name,null|bta_description,null|commission,null|country,null|cc_type,null|cc_number,null|expiry_date,null|description,Updated Description|eo_action,null|fax_number,null|fop_type,null|gst_absorb,null|gst_amount,null|header_address,null|header_fax,null|header_telephone,null|merchant_fee,null|merchant_fee_absorb,null|nett_cost,null|passenger_name,null|pcc,null|product_code,null|raise_cheque,null|record_locator,null|sellingPrice,null|status,null|tax_1,null|tax_2,null|total,null|total_selling_price,null|vendor_contact,null|vendor_code,null|vendor_name,null|vendor_address_1,null|vendor_address_2,null|vendor_city,null|vendor_country,null    
    Send Exchange Order Post Request For Amend     amend_eo_data=true
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Create Test Variables For Exchange Order    account_number,12345|date,2018-05-29T00:00:00.000Z|agent_id,U001XXX|agent_name,Test Agent Name|bta_description,Test BTA Description|commission,1000.01|country,SG|cc_type,AX|cc_number,1234|expiry_date,11/23|description,Updated Description|eo_action,Print|fax_number,123456789|fop_type,CX4|gst_absorb,false|gst_amount,300.01|header_address,Test Header Address|header_fax,987654321|header_telephone,00123456789|merchant_fee,45.01|merchant_fee_absorb,false|nett_cost,600.01|passenger_name,Test Passenger Name|pcc,PCC 1|product_code,18|raise_cheque,Monthly|record_locator,PNR1234|sellingPrice,700.01|status,New|support_email,support.email@carlsonwagonlit.com|tax_1,100.01|tax_2,120.01|total,1200.01|total_selling_price,1500.01|vendor_contact,TEST Contact Person|vendor_code,021238|vendor_name,Carlson Wagonlit GST|vendor_address_1,INTERCOMPANY - TRADE|vendor_address_2,${EMPTY}|vendor_city,SIN|vendor_country,${EMPTY}    contact_data=email,test@test.com,true|fax,099097668,true    eo_remarks_data=CHECK IN WITH VOUCHER COPY,REQUEST ADJOINING ROOMS    itin_remarks_data=COPY OF VOUCHER REQIRED FOR CHECKIN,EARLY CHECK IN HAS BEEN REQUESTED
    Verify Exchange Order Is Saved Correctly
    Send Exchange Order PDF Get Request    
    Verify Response Status Code Is Correct For Exchange Order Request    200
    Verify Exchange Order Information For PDF Is Retrieved Correctly
    