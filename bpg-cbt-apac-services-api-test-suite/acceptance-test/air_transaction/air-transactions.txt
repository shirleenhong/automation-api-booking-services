*** Settings ***
Resource          ../resources/api-variables.txt
Resource          ../resources/api-utilities.txt
Resource          ../resources/api-imports.txt
Resource    resources/air-transaction.txt

Suite Setup    Generate Suite Variables For Air Transaction    cc_vendor_data_list=TP,Airplus|DC,Diners|CA,Mastercard|AX,Amex    rbd_data_list=G,ECONOMY|Q,ECONOMY|C,EXECUTIVE|I,ECONOMY    airline_data_list=AB,Air Berlin|TST,Test Airline|SG,SpiceJet   

*** Test Cases ***
Verify That Air Transactions Are Correctly Retrieved
    [Tags]    functional
    Create Test Variable For Air Transaction    data_list=AB,TP,NRCC,null,Airline;G|AB,DC,UATP,null,Airline;G|AB,CA,NRCC,null,Airline;G|AB,AX,UATP,null,Airline;G|AB,TP,UATP,null,Airline;G|AB,AX,NRCC,null,Airline;G|AB,DC,NRCC,null,Airline;G|AB,CA,UATP,null,Airline;G    consumer=maintenance
    Send Air Transaction Get Request (Maintenance)    airline_code=AB
    Verify Response Status Code Is Correct    200
    Verify Air Transaction Record Is Retrieved Correctly
    
Verify That Air Transactions Are Updated Correctly After Put Request
    [Tags]    functional
    #Single Booking Class
    Create Test Variable For Air Transaction    data_list=TST1,CA,NRCC,1111111111,CWT;C
    Send Air Transaction Put Request (Maintenance)
    Verify Response Status Code Is Correct    200
    Verify Air Transaction Record Is Saved Correctly
    Evict Air Transaction Cache
    Send Air Transaction Get Request (Maintenance)    airline_code=TST    client_account_number=1111111111
    Verify Air Transaction Record Is Retrieved Correctly
    #Multiple Booking Class
    Create Test Variable For Air Transaction    data_list=TST2,CA,NRCC,1111122222,CWT;C,G,Q
    Send Air Transaction Put Request (Maintenance)
    Verify Response Status Code Is Correct    200
    Verify Air Transaction Record Is Saved Correctly
    Evict Air Transaction Cache
    Send Air Transaction Get Request (Maintenance)    airline_code=TST    client_account_number=1111122222
    Verify Air Transaction Record Is Retrieved Correctly
    #No Client Account Number
    Create Test Variable For Air Transaction    data_list=TST3,CA,NRCC,null,CWT;C,G,Q
    Send Air Transaction Put Request (Maintenance)
    Verify Response Status Code Is Correct    200
    Verify Air Transaction Record Is Saved Correctly
    Evict Air Transaction Cache
    Send Air Transaction Get Request (Maintenance)    airline_code=TST
    Verify Air Transaction Record Is Retrieved Correctly
    [Teardown]    Delete Created Air Transaction And Evict Cache
    
Verify That Air Transactions Are Deleted Correctly After Delete Request
    [Tags]    functional
    Create Test Variable For Air Transaction    data_list=TST,CA,NRCC,1111111111,CWT;C
    Send Air Transaction Put Request (Maintenance) 
    Verify Response Status Code Is Correct    200
    Verify Air Transaction Record Is Saved Correctly
    Evict Air Transaction Cache    
    Send Air Transaction Delete Request (Maintenance)     
    Verify Response Status Code Is Correct    200
    Evict Air Transaction Cache
    Send Air Transaction Get Request (Maintenance)     airline_code=TST    client_account_number=1111111111 
    Verify Response Status Code Is Correct    200
    Verify Air Transaction Record Is Not Retrieved